mixin sPickup(data)
	// start sPickup
	+b.SECTION.sPickup.section#sPickup&attributes(attributes)
		h4 Способ доставки
		+deliveryOption()
		.tabs
				+b.section-title
					.row
						.col
							p Выберите магазин:
						.col-auto
								.tabs__caption
									.tabs__btn.active Списком
									.tabs__btn На карте
				.tabs__content.active
					+form-wrap
						+choiceOption('Магазин Golden Decor в ТК Каширский Двор', 'г. Москва, Каширское шоссе, дом 19, корпус 1', '09:00 — 21:00')(checked)
						+choiceOption('Магазин Golden Decor в ТЦ Экспострой', 'г. Москва, Нахимовский проспект, дом 24', '09:00 — 22:00')
						+choiceOption('Магазин Golden Decor в ТЦ Тройка', 'г. Москва, ул. Верхняя Красносельская 3А', '09:00 — 22:00')
					+form-wrap()
						+input('Ваш комментарий к заказу', 'textarea')
				.tabs__content
					+e.map
						+e.map-widget#map2
						script.
							ymaps.ready(function () {
							const markIcon = 'img/svg/map.png';
							const markIconColor = 'img/svg/map-color.png';
							var center = [55.75380038320217,37.62071970898438];
							var myMap = new ymaps.Map('map2', {
											center: center,
											zoom: 10,
											controls: ['zoomControl']
									}), 
									clusterer = new ymaps.Clusterer({ 
											preset: 'islands#invertedVioletClusterIcons', 
											groupByCoordinates: false, 
											clusterDisableClickZoom: true,
											clusterHideIconOnBalloonOpen: false,
											geoObjectHideIconOnBalloonOpen: false
									}),
											getPointData = function (i, t, p, time) {
											return { 
												balloonContent: `<img src="${i}"><div class="h5">${t}</div><p>${p}</p><span> Режим работы:</span> <span>${time}</span>`
											};
									},
											getPointOptions = function () {
											return {
													hideIconOnBalloonOpen: false,
													iconLayout: 'default#image',
													iconImageHref: markIcon,
													// Размеры метки.
																
													iconImageSize: [30, 32],
													// Смещение левого верхнего угла иконки относительно
													// её "ножки" (точки привязки).
													iconImageOffset: [-15, -32]
											};
									},
									points = [
											{mark: [55.67455635081638,37.64072341673275], i:'../img/@2x/haveStore.png"', t:'Магазин Golden Decor в ТК Каширский Двор', p: 'г. Москва, Каширское шоссе, дом 19, корпус 1', time:  '10:00 — 22:00'},
											{mark: [55.684072399488265,37.55676825847164], i:'../img/@2x/haveStore.png"', t:'Магазин Golden Decor в ТК Каширский Двор', p: 'г. Москва, Каширское шоссе, дом 19, корпус 1', time:  '10:00 — 22:00'},
											{mark: [55.78843546026375,37.656384548873845], i:'../img/@2x/haveStore.png"', t:'Магазин Golden Decor в ТК Каширский Двор', p: 'г. Москва, Каширское шоссе, дом 19, корпус 1', time:  '10:00 — 22:00'},
											{mark: [55.744522,37.616378], i:'../img/@2x/haveStore.png"', t:'Магазин Golden Decor в ТК Каширский Двор', p: 'г. Москва, Каширское шоссе, дом 19, корпус 1', time:  '10:00 — 22:00'},
											{mark: [55.716733,37.589988], i:'../img/@2x/haveStore.png"', t:'Магазин Golden Decor в ТК Каширский Двор', p: 'г. Москва, Каширское шоссе, дом 19, корпус 1', time:  '10:00 — 22:00'},
									],
									geoObjects = [];
						
								for (var i = 0, len = points.length; i < len; i++) {
									let mark = points[i].mark;
									let markdata = getPointData(points[i].i, points[i].t, points[i].p, points[i].time); 
										geoObjects[i] = new ymaps.Placemark(mark, markdata, getPointOptions());
										geoObjects[i].events
										.add('balloonopen', e => {
											var target = e.get('target');
											target.options.set('iconImageHref', markIconColor);
											target.options.set({iconImageSize: [68, 74]});
											target.options.set({iconImageOffset: [-34, -74]});
											$(".sPickup__map-caption").html(`<div class="content">${target.properties.get('balloonContent')}</div><div class="closeButton"></div></div>`);
										})
										.add('balloonclose', (e) => {
											var target = e.get('target');
											target.options.set('iconImageHref', markIcon);
											target.options.set({iconImageSize: [30, 32]});
											target.options.set({iconImageOffset: [-15, -32]});
												$(".sPickup__map-caption").html(""); 
											});

									
								}
								clusterer.options.set({
										gridSize: 80,
										clusterDisableClickZoom: true
								});
								clusterer.add(geoObjects);
								myMap.geoObjects.add(clusterer);
								myMap.setBounds(clusterer.getBounds(), {
										checkZoomRange: true
								});
								$(document).on('click', '.closeButton', function () {
									myMap.balloon.close()
								// $(document).
								});
								myMap.behaviors.disable('scrollZoom');
								//на мобильных устройствах... (проверяем по userAgent браузера)
								if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
									// ... отключаем перетаскивание карты
									myMap.behaviors.disable('drag');
								}
							});
					+e.container
						+e.map-caption.container
					+form-wrap()
						+input('Ваш комментарий к заказу', 'textarea')
	// end sPickup